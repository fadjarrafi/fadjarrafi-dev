---
title: Apa itu Cross Origin Resource Sharing (CORS)?
date: '2024-06-16'
language: 'id'
tags: ['api', 'security']
draft: false
summary: Cross-origin resource sharing adalah mekanisme yang membantu mengamankan pertukaran data antara client dengan server.
canonicalUrl: https://fadjarrafi.com/blog/id/cors-what-it-is
---

<div className="flex justify-center">
  <img src="/static/cors/cors-error.png" alt="CORS Error" width="700" />
</div>

Pernahkah Anda mengalami masalah ini saat merancang aplikasi web? Ya, ini adalah mimpi buruk bagi beberapa pengembang, termasuk saya sendiri ketika pertama kali belajar. Saya menemukan masalah ini ketika belajar cara mengembangkan API untuk sebuah blog. Untuk memahami bagaimana kesalahan ini bisa terjadi, kita perlu mengetahui apa itu CORS dan bagaimana cara kerjanya.

## The Same-Origin Policy

Secara default, browser hanya dapat membuat permintaan jika sumber daya berasal dari sumber yang sama (domain, protokol, atau port yang sama); ini dikenal sebagai kebijakan same-origin (SOP). SOP ini akan membatasi bagaimana skrip dalam aplikasi web kita dari satu asal berinteraksi dengan sumber daya dari asal lain.

Bayangkan Anda memiliki aplikasi web dengan domain 'https://www.domain-a.com' yang membutuhkan data dari API yang berada di 'https://api.domain-b.com'. Permintaan lintas asal (cross-origin) adalah permintaan yang berasal dari asal berbeda.

<div className="flex justify-center">
  <img src="/static/cors/cross-origin request.png" alt="Cross-origin request" width="700" />
</div>

Namun, apa yang terjadi jika aplikasi web kita harus berkomunikasi dengan sumber yang tidak berada di domain kita? Di sinilah CORS diterapkan.

## Apa itu CORS

Cross-origin resource sharing adalah cara bagi browser untuk mengelola akses ke sumber daya dari domain lain. Agar browser dan server dapat berkomunikasi, CORS menambahkan header HTTP ke permintaan kita. Header HTTP ini menunjukkan asal mana yang diizinkan untuk mengakses sumber daya tersebut.

Ada beberapa [header CORS](https://fetch.spec.whatwg.org/#http-cors-protocol), tetapi header standar utama yang digunakan adalah:

- `Access-Control-Allow-Origin`
- `Access-Control-Allow-Methods`
- `Access-Control-Allow-Headers`

Ketika kita membuat request seperti `GET`, `POST` atau `HEAD`, request akan dikirim dari browser ke server tanpa header kustom.

<div className="flex justify-center">
  <img src="/static/cors/cors request.png" alt="CORS request" width="700" />
</div>

#### Permintaan dari Browser:

```
GET /data HTTP/1.1
Host: api.domain-b.com
Origin: https://www.domain-a.com
```

#### Respons dari Server:

```
HTTP/1.1 200 OK
Access-Control-Allow-Origin: https://www.domain-a.com
Content-Type: application/json

{ "message": "Hello from domain-b!" }
```

Namun, jika kita ingin membuat permintaan seperti 'DELETE', 'PUT', 'PATCH', atau permintaan dengan header kustom, browser akan terlebih dahulu melakukan pemeriksaan preflight untuk memastikan bahwa permintaan asli aman untuk dikirim dengan membuat permintaan 'OPTION'. Misalnya, program kita meminta untuk menghapus data.

#### Permintaan Preflight `OPTIONS` dari Browser:

```
OPTIONS /data HTTP/1.1
Host: api.domain-b.com
Origin: https://www.domain-a.com
Access-Control-Request-Method: DELETE
Access-Control-Request-Headers: Content-Type
```

#### Respons Preflight `OPTIONS` dari Server:

```
HTTP/1.1 204 No Content
Access-Control-Allow-Origin: https://www.domain-a.com
Access-Control-Allow-Methods: GET, POST, DELETE, OPTIONS
Access-Control-Allow-Headers: Content-Type
```

Setelah berhasil menerima respons dari preflight, browser kita mengirim permintaan, dan jika berhasil, server mengembalikan respons ok.

#### Permintaan `DELETE` dari Browser:

```
DELETE /data/123 HTTP/1.1
Host: api.domain-b.com
Origin: https://www.domain-a.com
Content-Type: application/json
```

#### Respons dari Server:

```
HTTP/1.1 200 OK
Access-Control-Allow-Origin: https://www.domain-a.com
Content-Type: application/json

{"message": "Resource deleted successfully!"}
```

## Mengapa CORS penting?

CORS memungkinkan server web untuk menentukan siapa yang dapat mengakses sumber daya. Ini penting untuk mencegah potensi serangan antar domain, seperti serangan [cross-site request forgery (CSRF)](https://hackernoon.com/cross-site-request-forgery-csrf-attacks-an-emerging-threat-to-browser-security?source=rss&ref=dailydev) yang disebabkan oleh kueri tidak sah ke domain lain. Selain itu, CORS memungkinkan aplikasi web untuk berinteraksi secara aman dengan berbagai macam sumber daya dari banyak asal.

**Thanks for Reading✌️**
